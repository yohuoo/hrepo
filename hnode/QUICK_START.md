# 🚀 HNode CRM 快速开始指南

## 📋 5分钟快速启动

### 步骤1：环境准备（1分钟）

```bash
# 克隆项目
cd hnode

# 复制环境变量模板
cp env.example .env

# 编辑.env文件，至少配置这3项：
# OPENAI_API_KEY=sk-your-key
# JWT_SECRET=your-32-char-secret
# DB_PASSWORD=your-password
```

### 步骤2：启动服务（2分钟）

```bash
# 一键启动
./start.sh

# 等待服务启动（约30秒）
# 看到 "🚀 服务器启动成功!" 即可
```

### 步骤3：登录系统（1分钟）

```bash
# 浏览器访问
open http://127.0.0.1:8000

# 使用默认账号登录
用户名: admin
密码:   Admin123456
```

### 步骤4：修改密码（30秒）

```bash
# 登录后点击右上角头像 → "修改密码"
# 设置新密码后保存
```

### 步骤5：开始使用（30秒）

现在您可以：
- ✅ 添加联系人（Hunter搜索）
- ✅ 创建客户
- ✅ 发送邮件
- ✅ 查看数据统计

---

## 🎯 核心功能快速上手

### 1️⃣ 添加第一个联系人（Hunter.io搜索）

```bash
进入"联系人" → 点击"Hunter.io搜索"
输入域名: example.com
选择联系人 → 点击"导入"
```

### 2️⃣ 发送第一封邮件

```bash
进入"邮件模板" → 点击"新建模板"
填写标题和内容 → 保存

进入"写邮件" → 选择模板
选择收件人 → 点击"发送"
```

### 3️⃣ 查看数据统计

```bash
进入"数据统计"
查看：联系人、客户、邮件、销售趋势
查看：AI数据洞察、行动建议
```

### 4️⃣ 录入销售合同

```bash
进入"客户" → 选择客户
将"成交状态"改为"已成交"
点击"录入合同" → AI自动建议合同信息
确认后保存 → 自动创建销售记录
```

### 5️⃣ 生成销售案例

```bash
进入"案例总结" → 点击"生成新案例"
选择已成交客户 → 点击"开始生成"
AI自动分析：客户信息、销售技巧、沟通亮点
```

---

## 🔐 权限管理快速指南

### 创建部门和用户

```bash
# 1. 创建部门
进入"部门管理" → 添加部门
例如：销售部、市场部、技术部

# 2. 添加用户
进入"用户管理" → 添加用户
填写：用户名、邮箱、密码、所属部门、角色
```

### 配置权限

```bash
# 只有超级管理员可以配置权限
进入"页面权限"

# 方式1：部门权限（推荐）
选择"部门" → 选择销售部
勾选需要的权限 → 保存
该部门所有用户自动继承权限

# 方式2：个人权限（特殊情况）
选择"用户" → 选择具体用户
勾选额外权限 → 保存
个人权限会追加到部门权限
```

### 权限示例场景

**场景1：限制普通销售只能查看自己的数据**
```
✅ 给予：联系人查看、客户查看、邮件收发
❌ 不给：部门管理、用户管理、删除其他人数据
```

**场景2：允许销售经理查看部门数据**
```
✅ 给予：部门数据查看权限
✅ 在"数据统计"中可以"按部门"筛选
```

---

## ⚡ 常用快捷操作

### 批量操作

```bash
# 联系人批量操作
勾选联系人 → "导出选中"（CSV下载）
勾选联系人 → "删除选中"（批量删除）
```

### AI辅助功能

```bash
# 邮件AI辅助
写邮件时用中文 → "一键润色为英文邮件"
查看邮件详情 → "翻译邮件"（中英互译）

# 客户AI分析
点击客户头像 → 自动AI分析
查看：沟通进度、机会点、风险、战略建议

# 合同AI建议
点击"录入合同" → AI自动建议合同内容
基于：历史邮件、销售记录
```

---

## 🛠 故障排查

### 服务启动失败

```bash
# 检查端口占用
lsof -i:8000
lsof -i:5432
lsof -i:6379

# 查看Docker日志
docker-compose logs --tail=50

# 重启服务
docker-compose restart
```

### 权限配置后未生效

```bash
# 清除Redis缓存
docker-compose exec redis redis-cli FLUSHDB

# 或重启Redis
docker-compose restart redis

# 用户刷新浏览器
```

### 数据统计不更新

```bash
# 方式1：刷新页面
直接刷新浏览器（F5）

# 方式2：切换时间范围
改变时间筛选会重新加载数据

# 方式3：检查数据库
docker-compose exec postgres psql -U hrepo_user -d hrepo
SELECT COUNT(*) FROM contacts;
SELECT COUNT(*) FROM customers;
```

---

## 📞 需要帮助？

- 📖 详细文档：查看 [README.md](./README.md)
- 🔧 API文档：查看 [API_DOCUMENTATION.md](./API_DOCUMENTATION.md)
- 🐳 Docker指南：查看 [DOCKER_GUIDE.md](./DOCKER_GUIDE.md)
- 🚀 部署指南：查看 [DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md)

**祝您使用愉快！** 🎉

